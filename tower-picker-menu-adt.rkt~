(load "tower-picker-menu-item-adt.rkt")

(define (make-tower-picker-menu)
  (let ((tower-picker-menu-items (make-vector (length tower-configurations))))

    ; Procedure that makes a tower picker menu in the sidebar
    (define (make-tower-picker-menu)
      (define (loop tower-configs i)
        (when (not (null? tower-configs))
          (vector-set! tower-picker-menu-items i (make-tower-picker-item (tower-config-name (car tower-configs)) (tower-config-image (car tower-configs))))
          (loop (cdr tower-configs) (+ i 1))))
      (loop tower-configurations 0))
    
    (define (dispatch msg)
      (cond ((eq? msg 'get-picker-items) tower-picker-menu-items)
            (else (display ("ERROR -- tower-adt dispatch message not understood: ")) (display msg))))
    
    dispatch))